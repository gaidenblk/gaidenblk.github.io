<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercício 10</title>
    <style>
        .semana {
            border: 2px solid;
            border-radius: 5px;
            font-weight: bolder;
            width: 120px;
            height: 600px;
            display: flex;
            flex-direction: column;
        }
        .tarefa {
            word-wrap: break-word;
            font-size: 15px;
            margin-bottom: 10px;
            padding: 5px;
            border-radius: 5px;
            font-weight: bold;
            color: #000000;
            display: block;
        }
        .tarefa.azul {
            background-color: #3498db;
        }
        .tarefa.vermelho {
            background-color: #e74c3c;
        }
        #tabelaDias {
            text-align: center;
            display: flex;
        }

    </style>
</head>
<body>
    <div>
        Tarefa:
        <input type="text" id="tarefa">
    </div>
    <div>
        Data:
        <input type="date" name="" id="data">
    </div>
    <button id="adiciona">adicionar</button>
    <div id="tabelaDias">
        <div id="segunda" class="semana">Segunda</div>
        <div id="terca" class="semana">Terça</div>
        <div id="quarta" class="semana">Quarta</div>
        <div id="quinta" class="semana">Quinta</div>
        <div id="sexta" class="semana">Sexta</div>
        <div id="sabado" class="semana">Sábado</div>
        <div id="domingo" class="semana">Domingo</div>
    </div>
    Voltar para a <a href="index.html">Lista</a><br/>
    Voltar para o <a href="/exercicios-javascript.html">Inicio</a>
    <script>
        const segunda = document.querySelector("#segunda");
        const terca = document.querySelector("#terca");
        const quarta = document.querySelector("#quarta");
        const quinta = document.querySelector("#quinta");
        const sexta = document.querySelector("#sexta");
        const sabado = document.querySelector("#sabado");
        const domingo = document.querySelector("#domingo");

        const adiciona = document.querySelector("#adiciona");
        const data = document.querySelector("#data");

        const diaDaSemana = {
            0: domingo,
            1: segunda,
            2: terca,
            3: quarta,
            4: quinta,
            5: sexta,
            6: sabado
        };

        const mesDoAno = {
            0: "janeiro",
            1: "fevereiro",
            2: "março",
            3: "abril",
            4: "maio",
            5: "junho",
            6: "julho",
            7: "agosto",
            8: "setembro",
            9: "outubro",
           10: "novembro",
           11: "dezembro"
        }

        adiciona.addEventListener("click", function() {
            const dataString = data.value;
            const dateObj = new Date(dataString + "T00:00:00");
            const diaSemana = dateObj.getDay();
            const diaMes = dateObj.getMonth();
            const diaData = dateObj.getDate();
            const tarefaInput = document.getElementById("tarefa");
            const concatenaData = `${diaData} / ${mesDoAno[diaMes]}`;
            const tarefa = `${concatenaData} ${tarefaInput.value}`;

            const tarefaDiv = document.createElement("div");
            tarefaDiv.classList.add("tarefa");
            tarefaDiv.textContent = tarefa;

            const diferencaDias = Math.ceil((dateObj.getTime() - Date.now()) / (1000 * 60 * 60 * 24));

            if (diferencaDias > 7) {
                tarefaDiv.classList.add("azul");
            } else if (diferencaDias <= 7 && diferencaDias >= 1) {
                tarefaDiv.classList.add("vermelho");
            }

            diaDaSemana[diaSemana].appendChild(tarefaDiv);
        });
    </script>
</body>
</html>